import random

print('Welcome, you have to find a word, by guessing letters. You have 10 attempts.')

# list of words in words.txt
words = []
with open('words.txt') as f:
    words = f.read().splitlines()

# choose a random word from the list
word = random.choice(words)

# create a list of underscores with the same length as the word
display = ['_'] * len(word)

# number of attempts
attempts = 10

# list of guessed letters
guessed_letters = []

# Create a function to display the current state of the game
def display_game():
    print(' '.join(display))
    print('Attempts left:', attempts)
    print('Guessed letters:', ' '.join(guessed_letters))

# Create a fonction to replace display by right guessed letters
def replace_letter(letter):
    for i in range(len(word)):
        if word[i] == letter:
            display[i] = letter

# Create a function to check if the player has won
def check_win():
    if '_' not in display:
        print('Congratulations, you won 🏆')
        return True
    else:
        return False

# Create a function to check if the player has lost
def check_loss():
    if attempts == 0:
        print('Sorry, you lost 💀 The word was', word)
        return True
    else:
        return False

# Create a function to handle a player's guess
def handle_guess(guess):
    global attempts
    global guessed_letters
    if guess in guessed_letters:
        print('You already guessed that letter.')
    elif guess in word:
        print('Correct!')
        guessed_letters.append(guess)
    else:
        print('Incorrect.')
        attempts -= 1
        guessed_letters.append(guess)

#draw the hangman with specials characters
def draw_hangman(attempts):
  if attempts == 9:
    print('  _______')
    print(' |')
    print(' |')
    print(' |')
  if attempts == 8:
    print('  _______')
    print(' |')
    print(' |')
    print(' |')
    print(' |')
  if attempts == 7:
    print('  _______')
    print(' |       |')
    print(' |')
    print(' |')
    print(' |')
  if attempts == 6:
    print('  _______')
    print(' |       |')
    print(' |       🙁')
    print(' |')
    print(' |')
  if attempts == 5:
    print('  _______')
    print(' |       |')
    print(' |       ☹️')
    print(' |       |')
    print(' |')
  if attempts == 4:
    print('  _______')
    print(' |       |')
    print(' |       😩')
    print(' |      /|')
    print(' |')
  if attempts == 3:
    print('  _______')
    print(' |       |')
    print(' |       😓')
    print(' |      /|\\')
  if attempts == 2:
    print('  _______')
    print(' |       |')
    print(' |       😖')
    print(' |      /|\\')
    print(' |      /')
  if attempts == 1:
    print('  _______')
    print(' |       |')
    print(' |       😰')
    print(' |      /|\\')
    print(' |      / \\')
  if attempts == 0:
    print('  _______')
    print(' |       |')
    print(' |      💀')
    print(' |      /|\\')
    print(' |      / \\')

# Main game with draw_hangman()
while True:
    display_game()
    guess = input('Guess a letter: ').lower()
    handle_guess(guess)
    replace_letter(guess)
    if check_win():
        break
    draw_hangman(attempts)
    if check_loss():
        break
